<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Central de Atendimento</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}

header {
  background: #2f3e46;
  color: #fff;
  padding: 14px;
  text-align: center;
  font-weight: bold;
}

.tabs {
  display: flex;
  background: #cad2c5;
}

.tab {
  padding: 10px 16px;
  cursor: pointer;
  border-right: 1px solid #999;
}

.tab.active {
  background: #fff;
  font-weight: bold;
}

.content {
  display: none;
  padding: 16px;
  background: #fff;
  height: calc(100vh - 90px);
  overflow-y: auto;
}

.content.active {
  display: block;
}

label {
  font-weight: bold;
  display: block;
  margin-top: 10px;
}

input, textarea, select {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
}

textarea {
  resize: vertical;
}

button {
  padding: 10px;
  margin-top: 10px;
  cursor: pointer;
}

.btn {
  background: #2f3e46;
  color: #fff;
  border: none;
  font-weight: bold;
}

.btn-full {
  width: 100%;
}

.row {
  display: flex;
  gap: 10px;
}

.row button {
  flex: 1;
}

.box {
  background: #eee;
  padding: 10px;
  margin-top: 10px;
  font-size: 13px;
}

.table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

.table th, .table td {
  border: 1px solid #ccc;
  padding: 6px;
  font-size: 13px;
}

.icon-btn {
  cursor: pointer;
  margin-right: 6px;
}
</style>
</head>

<body>

<header>CENTRAL DE ATENDIMENTO</header>

<div class="tabs">
  <div class="tab active" onclick="openTab(event,'comentarios')">Coment√°rios</div>
  <div class="tab" onclick="openTab(event,'pendencias')">Pend√™ncias</div>
  <div class="tab" onclick="openTab(event,'paralelas')">Paralelas</div>
  <div class="tab" onclick="openTab(event,'os')">O.S.</div>
</div>

<!-- COMENT√ÅRIOS -->
<div id="comentarios" class="content active">
  <label>Canal</label>
  <select id="canal">
    <option>CALL CENTER</option>
    <option>LOJA</option>
  </select>

  <label>Protocolo</label>
  <input id="protocolo" oninput="atualizarPrefixo()">

  <label>Coment√°rio</label>
  <textarea id="comentario" rows="4"></textarea>

  <button class="btn btn-full" onclick="copiarComentario()">COPIAR</button>
  <button class="btn btn-full" onclick="salvarPendencia()">SALVAR PEND√äNCIA</button>
</div>

<!-- PEND√äNCIAS -->
<div id="pendencias" class="content">
  <table class="table">
    <thead>
      <tr>
        <th>Matr√≠cula</th>
        <th>Coment√°rio</th>
        <th>A√ß√µes</th>
      </tr>
    </thead>
    <tbody id="listaPendencias"></tbody>
  </table>
</div>

<!-- PARALELAS -->
<div id="paralelas" class="content">
  <div class="box">
    <b>SUPERVISORES</b><br>
    kleber.filho@aeparceiros.com.br<br>
    victoria.ferreira@aeparceiros.com.br<br>
    barbara.piva@aeparceiros.com.br<br>
    carina.saraiva@aeparceiros.com.br
  </div>

  <label>Tipo de paralela</label>
  <select id="tipoParalela" onchange="carregarParalela()">
    <option value="">Selecione</option>
    <option value="cancelamento">Cancelamento de solicita√ß√£o</option>
    <option value="pipa">Caminh√£o pipa</option>
    <option value="retificacao">Retifica√ß√£o fora do prazo</option>
    <option value="debito">Bloquear d√©bito</option>
    <option value="exclusao">Exclus√£o cadastro</option>
    <option value="religacao">Religa√ß√£o corte indevido</option>
  </select>

  <textarea id="textoParalela" rows="10"></textarea>
  <button class="btn btn-full" onclick="copiarParalela()">COPIAR</button>
</div>

<!-- O.S. -->
<div id="os" class="content">

  <!-- ETAPA 1 -->
  <div id="os-step-1">
    <label>Tipo de O.S.</label>
    <select id="osTipo">
      <option value="">Selecione</option>
      <option value="138001">138001 ‚Äì Vazamento rua/cal√ßada</option>
      <option value="119001">119001 ‚Äì Vazamento no quadro</option>
      <option value="103002">103002 ‚Äì Tarifa social</option>
      <option value="102002">102002 ‚Äì Verifica√ß√£o cadastral</option>
      <option value="118061">118061 ‚Äì Supress√£o de esgoto</option>
      <option value="146004">146004 ‚Äì Falta de √°gua</option>
    </select>

    <label>Nome do cliente</label>
    <input id="osNome">

    <label>Telefone do cliente</label>
    <input id="osTelefone">

    <button class="btn btn-full" onclick="iniciarOS()">CONTINUAR</button>
  </div>

  <!-- ETAPA 2 -->
  <div id="os-step-2" style="display:none;">
    <button class="btn" onclick="voltarOS()">‚¨Ö VOLTAR</button>

    <div class="box" id="osHeader"></div>
    <div class="box" id="osInfo"></div>

    <label>CONTE√öDO DA O.S.</label>
    <textarea id="osTexto" rows="10"></textarea>

    <button class="btn btn-full" onclick="copiarOS()">COPIAR</button>
  </div>

</div>

<script>
function openTab(evt,id){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
  evt.target.classList.add('active');
  document.getElementById(id).classList.add('active');
}

function atualizarPrefixo(){
  const canal=document.getElementById("canal").value;
  const p=document.getElementById("protocolo").value.trim();
  if(p) comentario.value=`${canal} PROTOCOLO: ${p} - `;
}

function copiarComentario(){
  navigator.clipboard.writeText(comentario.value.toUpperCase());
}

let pendencias=JSON.parse(localStorage.getItem("pendencias")||"[]");

function salvarPendencia(){
  const mat=prompt("Matr√≠cula:");
  if(!mat) return;
  pendencias.push({matricula:mat,texto:comentario.value});
  localStorage.setItem("pendencias",JSON.stringify(pendencias));
  carregarPendencias();
}

function carregarPendencias(){
  listaPendencias.innerHTML="";
  pendencias.forEach((p,i)=>{
    listaPendencias.innerHTML+=`
      <tr>
        <td>${p.matricula}</td>
        <td>${p.texto.slice(0,60)}...</td>
        <td>
          <span class="icon-btn" onclick="copiarTexto('${p.matricula}')">üìãM</span>
          <span class="icon-btn" onclick="copiarTexto('${p.texto.replace(/'/g,"")}')">üìãC</span>
          <span class="icon-btn" onclick="excluirPendencia(${i})">üóë</span>
        </td>
      </tr>`;
  });
}

function copiarTexto(t){navigator.clipboard.writeText(t);}
function excluirPendencia(i){
  if(confirm("Excluir?")){
    pendencias.splice(i,1);
    localStorage.setItem("pendencias",JSON.stringify(pendencias));
    carregarPendencias();
  }
}

function carregarParalela(){
  const t=tipoParalela.value;
  let txt="";
  if(t==="cancelamento") txt=`CANCELAMENTO DE SOLICITA√á√ÉO\n\nMATR√çCULA:\nCIDADE:\nPROTOCOLO:\nSERVI√áO:\nN¬∫ SOLICITA√á√ÉO:\nMOTIVO:`;
  if(t==="pipa") txt=`CAMINH√ÉO PIPA\n\nPROTOCOLO:\nBAIRRO:\nCIDADE:\nMATR√çCULA:\nENDERE√áO:\nCELULAR:`;
  if(t==="retificacao") txt=`(SERVI√áO) FORA DO PRAZO ‚Äì COMPET√äNCIA XX/XXXX\nDATA:\nMATR√çCULA:\nCIDADE:\nPROTOCOLO:`;
  if(t==="debito") txt=`BLOQUEAR D√âBITO EM CONTA\n\nMATR√çCULA:\nCIDADE:\nPROTOCOLO:\nVENCIMENTO:\nVALOR:\nCOMPET√äNCIA:`;
  if(t==="exclusao") txt=`EXCLUS√ÉO CADASTRO SITE/APP\n\nNOME:\nMATR√çCULA:\nCPF:\nEMAIL:\nCPF CORRETO:\nMOTIVO: DADOS INCORRETOS`;
  if(t==="religacao") txt=`RELIGA√á√ÉO CORTE INDEVIDO ‚Äì REGIONAL ‚Äì O.S XXXXX ‚Äì PROTOCOLO XXXXX\n\nMATR√çCULA:\nCIDADE:\nVENCIMENTO:`;
  textoParalela.value=txt;
}

function copiarParalela(){
  navigator.clipboard.writeText(textoParalela.value);
}

const OS_MAP={
  "138001":{
    titulo:"138001 ‚Äì VAZAMENTO RUA/CAL√áADA",
    info:"ENDERE√áO COMPLETO\nPONTO DE REFER√äNCIA\nNUMERA√á√ÉO\nABASTECIMENTO\nQUANTIDADE DE √ÅGUA\nPRAZO: 48H",
    texto:""
  },
  "119001":{
    titulo:"119001 ‚Äì VAZAMENTO NO QUADRO",
    info:"SITUA√á√ÉO DO ABASTECIMENTO\nQUANTIDADE DE √ÅGUA\nREGISTRO COM PROBLEMA\nDESPERD√çCIO\nLIVRE ACESSO\nPRAZO: 24H",
    texto:""
  },
  "103002":{
    titulo:"103002 ‚Äì TARIFA SOCIAL",
    info:"DOCUMENTOS OBRIGAT√ìRIOS\nCOMPROVANTE DE BENEF√çCIO\nDOCUMENTO COM FOTO\nCOMPROVANTE DE RESID√äNCIA",
    texto:`AN√ÅLISE BENEF√çCIO - TARIFA SOCIAL
NOME SOLICITANTE:
V√çNCULO COM IM√ìVEL:
TELEFONE:
DOCUMENTOS ANEXADOS?`
  },
  "102002":{
    titulo:"102002 ‚Äì VERIFICA√á√ÉO CADASTRAL",
    info:"",
    texto:`VERIFICA√á√ÉO CADASTRAL
NOME SOLICITANTE:
V√çNCULO COM IM√ìVEL:
TELEFONE:
SOLICITA√á√ÉO DESEJADA:`
  },
  "118061":{
    titulo:"118061 ‚Äì SUPRESS√ÉO ESGOTO",
    info:"APENAS CLIENTES COM ESGOTO FATURADO",
    texto:`AN√ÅLISE SUPRESS√ÉO DE ESGOTO
MOTIVO:
TELEFONE:`
  },
  "146004":{
    titulo:"146004 ‚Äì FALTA DE √ÅGUA",
    info:"PRAZO 24H",
    texto:`REGISTRO ABERTO:
BAIRRO:
VIZINHOS TEM √ÅGUA:
CELULAR:`
  }
};

function iniciarOS(){
  const t=osTipo.value;
  if(!t) return alert("Selecione a O.S.");
  osHeader.innerText=`${OS_MAP[t].titulo}\nCLIENTE: ${osNome.value} | TEL: ${osTelefone.value}`;
  osInfo.innerText=OS_MAP[t].info;
  osTexto.value=OS_MAP[t].texto;
  document.getElementById("os-step-1").style.display="none";
  document.getElementById("os-step-2").style.display="block";
}

function voltarOS(){
  document.getElementById("os-step-2").style.display="none";
  document.getElementById("os-step-1").style.display="block";
}

function copiarOS(){
  navigator.clipboard.writeText(osTexto.value.toUpperCase());
}

carregarPendencias();
</script>

</body>
</html>
