<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Central de Atendimento</title>

<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f4f4; }
header { background:#2f3e46; color:#fff; padding:14px; text-align:center; font-weight:bold; }

.tabs { display:flex; background:#cad2c5; }
.tab { padding:10px 16px; cursor:pointer; border-right:1px solid #999; }
.tab.active { background:#fff; font-weight:bold; }

.content {
  display:none;
  padding:16px;
  background:#fff;
  height:calc(100vh - 90px);
  overflow-y:auto;
}
.content.active { display:block; }

label { font-weight:bold; display:block; margin-top:10px; }
input, textarea {
  width:100%; padding:8px; margin-top:4px; box-sizing:border-box;
}
textarea { resize:vertical; }

button { padding:8px; cursor:pointer; }

.btn-full {
  width:100%;
  margin-top:12px;
  background:#2f3e46;
  color:#fff;
  border:none;
  font-weight:bold;
}

.os-layout {
  display:grid;
  grid-template-columns:220px 1fr;
  gap:16px;
}

.os-list button {
  width:100%;
  margin-bottom:6px;
}

.orientacoes {
  background:#eee;
  padding:10px;
  font-size:13px;
  margin-bottom:10px;
}

.hidden { display:none; }
</style>
</head>

<body>

<header>CENTRAL DE ATENDIMENTO</header>

<div class="tabs">
  <div class="tab active" onclick="openTab(event,'comentarios')">Comentários</div>
  <div class="tab" onclick="openTab(event,'pendencias')">Pendências</div>
  <div class="tab" onclick="openTab(event,'os')">O.S.</div>
</div>

<!-- ================= COMENTÁRIOS ================= -->
<div id="comentarios" class="content active">
  <label>Matrícula</label>
  <input id="matricula">

  <label>Protocolo</label>
  <input id="protocolo" oninput="gerarInicio()">

  <label>Comentário</label>
  <textarea id="comentario" rows="4"></textarea>

  <button class="btn-full" onclick="copiarComentario()">COPIAR COMENTÁRIO</button>
</div>

<!-- ================= PENDÊNCIAS ================= -->
<div id="pendencias" class="content">
  <p>Pendências continuam funcionando normalmente.</p>
</div>

<!-- ================= O.S. ================= -->
<div id="os" class="content">

  <div class="os-layout">

    <!-- LISTA DE OS -->
    <div class="os-list">
      <button onclick="selecionarOS('religacao')">Religação por corte indevido</button>
      <button onclick="selecionarOS('pipa')">Caminhão pipa</button>
      <button onclick="selecionarOS('faltaagua')">Falta de água</button>
      <button onclick="selecionarOS('retificacao')">Retificação de fatura</button>
    </div>

    <!-- CONTEÚDO -->
    <div>

      <div id="orientacoes" class="orientacoes hidden"></div>

      <label>Nome do cliente</label>
      <input id="os_nome">

      <label>Celular</label>
      <input id="os_celular">

      <div id="camposOS"></div>

      <label>Texto da O.S.</label>
      <textarea id="os_texto" rows="8"></textarea>

      <button class="btn-full" onclick="copiarOSTexto()">COPIAR TEXTO DA O.S.</button>
    </div>

  </div>

</div>

<script>
function openTab(evt,id){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
  evt.target.classList.add('active');
  document.getElementById(id).classList.add('active');
}

/* ---------------- O.S. DATA ---------------- */

const OS = {
  religacao: {
    nome: "RELIGAÇÃO POR CORTE INDEVIDO",
    orientacoes: [
      "Conferir vencimento",
      "Validar protocolo",
      "Confirmar corte indevido"
    ],
    campos: ["MATRÍCULA", "CIDADE", "PROTOCOLO", "VENCIMENTO"]
  },
  pipa: {
    nome: "CAMINHÃO PIPA",
    orientacoes: null,
    campos: ["MATRÍCULA", "ENDEREÇO", "BAIRRO", "CIDADE", "PROTOCOLO"]
  },
  faltaagua: {
    nome: "FALTA DE ÁGUA",
    orientacoes: null,
    campos: ["MATRÍCULA", "CIDADE", "PROTOCOLO"]
  },
  retificacao: {
    nome: "RETIFICAÇÃO DE FATURA",
    orientacoes: null,
    campos: ["MATRÍCULA", "CIDADE", "PROTOCOLO", "COMPETÊNCIA", "DATA DA SOLICITAÇÃO"]
  }
};

let osAtual = null;

function selecionarOS(key){
  osAtual = OS[key];

  const orient = document.getElementById("orientacoes");
  orient.innerHTML = "";
  if (osAtual.orientacoes) {
    orient.classList.remove("hidden");
    orient.innerHTML = "<b>Orientações</b><ul>" +
      osAtual.orientacoes.map(o=>"<li>"+o+"</li>").join("") +
      "</ul>";
  } else {
    orient.classList.add("hidden");
  }

  const camposDiv = document.getElementById("camposOS");
  camposDiv.innerHTML = "";
  osAtual.campos.forEach(c=>{
    camposDiv.innerHTML += `
      <label>${c}</label>
      <input data-campo="${c}">
    `;
  });

  atualizarTextoOS();
}

document.addEventListener("input", e=>{
  if (e.target.closest("#os")) atualizarTextoOS();
});

function atualizarTextoOS(){
  if (!osAtual) return;

  let texto = osAtual.nome + "\n\n";
  texto += "NOME DO CLIENTE: " + document.getElementById("os_nome").value + "\n";
  texto += "CELULAR: " + document.getElementById("os_celular").value + "\n";

  document.querySelectorAll("#camposOS input").forEach(inp=>{
    texto += inp.dataset.campo + ": " + inp.value + "\n";
  });

  document.getElementById("os_texto").value = texto.toUpperCase();
}

function copiarOSTexto(){
  navigator.clipboard.writeText(
    document.getElementById("os_texto").value
  );
  alert("Texto da O.S. copiado!");
}

/* ---------------- COMENTÁRIOS (mantido) ---------------- */

function gerarInicio(){
  const p = document.getElementById("protocolo").value.trim();
  if (!p) return;
  document.getElementById("comentario").value =
    "CALL CENTER PROTOCOLO: " + p + " - ";
}

function copiarComentario(){
  navigator.clipboard.writeText(
    document.getElementById("comentario").value.toUpperCase()
  );
  alert("Comentário copiado!");
}
</script>

</body>
</html>
